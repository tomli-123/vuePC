(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f99efbe"],{"23a0":function(e,r,t){},"263e":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"edit-article"},[t("el-card",{scopedSlots:e._u([{key:"header",fn:function(){return[t("my-breadcrumb",[e._v("编辑文章")])]},proxy:!0}])},[t("el-form",{ref:"myform",attrs:{rules:e.rules,model:e.form,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{model:{value:e.form.title,callback:function(r){e.$set(e.form,"title",r)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("quill-editor",{attrs:{options:e.editorOption},on:{blur:e.quillFn,change:e.quillFn},model:{value:e.form.content,callback:function(r){e.$set(e.form,"content",r)},expression:"form.content"}})],1),t("el-form-item",{attrs:{label:"封面"}},[t("el-radio-group",{on:{change:e.changeCoverType},model:{value:e.form.cover.type,callback:function(r){e.$set(e.form.cover,"type",r)},expression:"form.cover.type"}},[t("el-radio",{attrs:{label:1}},[e._v("单图")]),t("el-radio",{attrs:{label:3}},[e._v("三图")]),t("el-radio",{attrs:{label:0}},[e._v("无图")]),t("el-radio",{attrs:{label:-1}},[e._v("自动")])],1),e.form.cover.type>0?t("div",{key:e.form.cover.type,staticClass:"cover-box"},e._l(e.form.cover.type,(function(r,o){return t("my-cover",{key:o,model:{value:e.form.cover.images[o],callback:function(r){e.$set(e.form.cover.images,o,r)},expression:"form.cover.images[index]"}})})),1):e._e(),-1===e.form.cover.type?t("div",{key:e.form.cover.type,staticClass:"cover-box"},e._l(e.form.cover.images.length+1,(function(r,o){return t("my-cover",{key:o,model:{value:e.form.cover.images[o],callback:function(r){e.$set(e.form.cover.images,o,r)},expression:"form.cover.images[index]"}})})),1):e._e()],1),t("el-form-item",{attrs:{label:"频道",prop:"channel_id"}},[t("my-channels",{model:{value:e.form.channel_id,callback:function(r){e.$set(e.form,"channel_id",r)},expression:"form.channel_id"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.saveArticle(!1)}}},[e._v("修改提交")]),t("el-button",{on:{click:function(r){return e.saveArticle(!0)}}},[e._v("存入草稿")])],1)],1)],1)],1)},n=[],a=(t("96cf"),t("1da1")),i=(t("a753"),t("8096"),t("14e1"),t("5956")),l=t("5c94"),c=t("900b"),s=t("8691"),u=t("953d"),m={name:"edit-article",components:{MyChannels:i["a"],MyBreadcrumb:c["a"],MyCover:l["a"],quillEditor:u["quillEditor"]},data:function(){return{form:{title:"",content:"",channel_id:"",cover:{type:0,images:[]}},rules:{title:[{required:!0,message:"请输入文章标题",trigger:["blur","change"]},{min:5,max:30,message:"文章标题必须是5-30个字符",trigger:["blur","change"]}],content:[{required:!0,message:"请输入文章内容",trigger:["blur","change"]}],channel_id:[{required:!0,message:"请选择频道",trigger:["blur","change"]}]},editorOption:{placeholder:"请输入文章内容",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["image"]]}}}},created:function(){this.loadArticle(this.$route.params.id)},methods:{loadArticle:function(e){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["d"])(e);case 3:o=t.sent,r.form=o.data.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveArticle:function(e){var r=this;this.$refs.myform.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=13;break}return t.prev=1,n=r.$route.params.id,t.next=5,Object(s["c"])(n,e,r.form);case 5:r.$message.success("操作成功"),r.$router.push("/articles"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0),r.$message.error("操作失败");case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())},quillFn:function(){this.$refs.myform.validateField("content")},changeCoverType:function(){this.form.cover.images=[]}}},f=m,d=(t("de45"),t("2877")),v=Object(d["a"])(f,o,n,!1,null,"2edf218a",null);r["default"]=v.exports},de45:function(e,r,t){"use strict";var o=t("23a0"),n=t.n(o);n.a}}]);
//# sourceMappingURL=chunk-2f99efbe.cfd15d75.js.map